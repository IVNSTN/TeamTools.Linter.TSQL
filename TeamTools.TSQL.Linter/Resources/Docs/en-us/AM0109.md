

# Table reference not schema qualified

|||
|-|-|
| Id | **AM0109**
| Mnemo | TABLE_REF_SCHEMA
| Severity | ⚠ Warning
| Category | [Ambiguity](./Category_Ambiguity.md)
| Source code | [SchemaQualifiedTableReferenceRule.cs](../../../Rules/Ambiguity/SchemaQualifiedTableReferenceRule.cs)

## Cause

This rule is triggered when the schema name is skipped in the table reference.
<p id="descr">Specify schema name.</p>

## Examples

Bad

```sql
CREATE INDEX idx_dbo_employee_key ON employee (key);

CREATE TRIGGER dbo.employee_sync
ON employee
...

SELECT key FROM employee;
```

Good

```sql
CREATE INDEX idx_dbo_employee_key ON dbo.employee (key);

CREATE TRIGGER dbo.employee_sync
ON dbo.employee
...

SELECT key FROM dbo.employee;
```

## Tips

💡 Different users may have different DEFAULT_SCHEMA, except members of the sysadmin. The table should be identified with the schema in the statement to avoid confusion.

💡 If the schema name isn't present in the query the cache can't be re-used for other users, only for the same user. It can lead to plan cache pollution and CPU resource waste.

## Links

[ALTER USER. Remarks.](https://learn.microsoft.com/en-us/sql/t-sql/statements/alter-user-transact-sql?view=sql-server-ver15&redirectedfrom=MSDN#remarks)
[Why you should always use schema name in queries.](https://www.red-gate.com/simple-talk/blogs/why-you-should-always-use-schema-name-in-queries/)
