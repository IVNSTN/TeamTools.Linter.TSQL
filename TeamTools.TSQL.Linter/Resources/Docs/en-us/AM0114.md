

# Ambiguous output of unordered TOP

|||
|-|-|
| Id | **AM0114**
| Mnemo | ORDER_BY_TOP
| Severity | ⚠ Warning
| Category | [Ambiguity](./Category_Ambiguity.md)
| Source code | [OrderedTopRule.cs](../../../Rules/Ambiguity/OrderedTopRule.cs)

## Cause

<p id="descr">This rule is triggered when the query contains TOP clause, but no ORDER BY clause.</p>

## Examples

Bad

```sql
SELECT TOP(10) id FROM dbo.employee
```

Good

```sql
SELECT TOP(10) id FROM dbo.employee ORDER BY salary
```

## Tips

💡 ORDER BY clause is the only way to predictably indicate which rows are affected by TOP.

💡 Pay attention to whether you need TOP at all.
SET @var = (SELECT id FROM dbo.branches WHERE name = 'main')
Such queries are often written specially to catch ambiguity. Top here disrupts all meanings.

## Links

[Defensive Database Programming Book](https://www.red-gate.com/library/defensive-database-programming)
