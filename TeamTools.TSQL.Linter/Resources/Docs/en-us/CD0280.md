

# Use CASE instead of IIF

|||
|-|-|
| Id | **CD0280**
| Mnemo | IIF_IN_CONSTRAINT
| Severity | ⚠ Warning
| Category | [ContinuousDelivery](./Category_ContinuousDelivery.md)
| Source code | [IifInConstraintRule.cs](../../../Rules/ContinuousDeployment/IifInConstraintRule.cs)

## Cause

This rule is triggered if `IIF` function is used in constraints.
<p id="descr">Use the CASE function.</p>

## Examples

Bad

```sql
CREATE TABLE foo
(
    bar DATETIME NOT NULL
    , mar AS IIF(bar < '2020-01-01', 1, 0)
);
```

Good

```sql
CREATE TABLE foo
(
    bar DATETIME NOT NULL
    , mar AS CASE WHEN bar < '2020-01-01' THEN 1 ELSE 0 END
);
```

## Tips

💡 The rule does not apply to temporary tables or table variables.

💡 DacFx converts `IIF` to `CASE` when publishing, and so it turns out to be an "eternal diff".
