

# Execute as SELF is not welcome

|||
|-|-|
| Id | **CD0779**
| Mnemo | EXECUTE_AS_SELF
| Severity | ⚠ Warning
| Category | [ContinuousDelivery](./Category_ContinuousDelivery.md)
| Source code | [ExecuteAsSelfRule.cs](../../../Rules/ContinuousDeployment/ExecuteAsSelfRule.cs)

## Cause

This rule is triggered if an `EXECUTE AS SELF` option is used.
<p id="descr">Remove EXECUTE AS SELF.</p>

## Examples

Bad

```sql
CREATE PROCEDURE foo
WITH EXECUTE AS SELF
AS
...
```

Good

```sql
CREATE PROCEDURE foo
AS
...
```

## Tips

💡 For queues, AS SELF is the default value. Therefore, in CREATE QUEUE expressions, you must always specify EXECUTE AS explicitly.

💡 When the EXECUTE AS SELF option is set, the execution context will select the user under whom the stored procedure was created in the database. This can be useful for debugging, however, with CONTINUOUS DEPLOYMENT configured, creation will be performed under a technical account that has nothing to do with the execution of the business logic implemented in the code. And with a lot of target servers it can be not generally possible to assume under which account the rollout will be performed. And leaving this security context as the main one is not valid. It is better to choose a specific technical account, leave AS CALLER or raise the context to AS OWNER, depending on what is correct for a specific software module.
