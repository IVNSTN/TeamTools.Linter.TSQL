

# No COMMIT in CATCH expected

|||
|-|-|
| Id | **CS0151**
| Mnemo | COMMIT_IN_CATCH
| Severity | ⚠ Warning
| Category | [CodeSmell](./Category_CodeSmell.md)
| Source code | [CommitInCatchRule.cs](../../../Rules/CodeSmell/CommitInCatchRule.cs)

## Cause

The rule is triggered if a COMMIT occurs in the CATCH.
<p id="descr">Roll back the transaction, or block the error and process the data after the CATCH block.</p>

## Examples

Bad

```sql
BEGIN CATCH
    COMMIT;
END CATCH;
```

Good

```sql
BEGIN CATCH
    IF (@@TRANCOUNT > 0)
    BEGIN
        ROLLBACK TRANSACTION;
    END;
END CATCH;
```
