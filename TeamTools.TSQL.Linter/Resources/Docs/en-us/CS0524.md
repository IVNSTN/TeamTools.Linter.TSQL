

# Unexpected data encryption

|||
|-|-|
| Id | **CS0524**
| Mnemo | DATA_ENCRYPTED
| Severity | ⚠ Warning
| Category | [CodeSmell](./Category_CodeSmell.md)
| Source code | [DataEncryptedRule.cs](../../../Rules/CodeSmell/DataEncryptedRule.cs)

## Cause

The rule is triggered if encryption of tables or messages of the service broker is detected.
<p id="descr">Check if the data needs to be encrypted.</p>

## Examples

Bad

```sql
...
BEGIN DIALOG CONVERSATION @dialog_handle
   FROM SERVICE [...]
   TO SERVICE '...'
   ON CONTRACT [...]
   WITH ENCRYPTION = ON ;
...
```

Good

```sql
...
BEGIN DIALOG CONVERSATION @dialog_handle
   FROM SERVICE [...]
   TO SERVICE '...'
   ON CONTRACT [...];
...
```

## Tips

💡 The encryption of tables and messages of the service broker is rarely used. If you do not apply encryption to all data without exception, then perhaps it is not required in this case.

💡 When deciding whether to use encryption, it is important to consider how users will access the data. If the data is accessed over an open network, encryption may be necessary to increase security. On the other hand, if all access to the data occurs over a secure internal network, encryption is not essential. The use of encryption also involves managing passwords, keys, and certificates.

## Links

[Encryption SQL Server](https://learn.microsoft.com/en-us/sql/relational-databases/security/encryption/sql-server-encryption?view=sql-server-ver16)

[Creating a dialog with additional encryption](https://learn.microsoft.com/en-us/sql/t-sql/statements/begin-dialog-conversation-transact-sql?view=sql-server-ver16#f-beginning-a-dialog-with-optional-encryption)

[Encrypting a data column](https://learn.microsoft.com/en-us/sql/relational-databases/security/encryption/encrypt-a-column-of-data?view=sql-server-ver16)
