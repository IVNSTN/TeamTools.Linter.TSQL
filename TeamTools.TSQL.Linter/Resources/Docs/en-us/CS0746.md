

# Unexpected date format control

|||
|-|-|
| Id | **CS0746**
| Mnemo | DATE_FORMAT_CONTROL
| Severity | ⚠ Warning
| Category | [CodeSmell](./Category_CodeSmell.md)
| Source code | [DateFormatControlRule.cs](../../../Rules/CodeSmell/DateFormatControlRule.cs)

## Cause

The rule is triggered if the control of the DATEFIRST and DATEFORMAT options is used in the code.
<p id="descr">Remove the control of the DATEFIRST and DATEFORMAT options.</p>

## Examples

Bad

```sql
SET DATEFORMAT DMY;
DECLARE @datevar DATETIME ;
SELECT @datevar = '2024-12-25'
```

Good

```sql
SELECT CONVERT(VARCHAR(20), GETDATE(), 103)  AS current_date
```

## Tips

💡 Such option management may be appropriate and even necessary for user reports and similar code, but it certainly is not for most stored procedures and triggers. Instead, it is better to place reports that depend on user preferences, or are guaranteed to be independent of runtime settings, in a separate schema, and add them to the whitelist.

## Links

[SET DATEFIRST (Transact-SQL)](https://learn.microsoft.com/en-us/sql/t-sql/statements/set-datefirst-transact-sql?view=sql-server-ver16)

[SET DATEFORMAT (Transact-SQL)](https://learn.microsoft.com/en-us/sql/t-sql/statements/set-dateformat-transact-sql?view=sql-server-ver16)

[Function CONVERT, Date and time styles](https://learn.microsoft.com/en-us/sql/t-sql/functions/cast-and-convert-transact-sql?view=sql-server-ver16#date-and-time-styles)
