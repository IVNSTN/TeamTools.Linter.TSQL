
# Returned value type mismatches expected type

|||
|-|-|
| Id | **CS0785**
| Mnemo | RETURN_VALUE_TYPE_MISMATCH
| Severity | ⚠ Warning
| Category | [CodeSmell](./Category_CodeSmell.md)
| Source code | [ReturnValueTypeMismatchRule.cs](../../../Rules/CodeSmell/ReturnValueTypeMismatchRule.cs)

## Cause

This rule is triggered if the procedure returns a value that is not of datatype `INT`, or if the return value in a scalar function does not match the declared datatype.
<p id="descr">Set the return value to the correct datatype.</p>

## Examples

Bad

```sql
CREATE PROC dbo.one
AS
BEGIN
    -- only INT is supported
    RETURN 'adsf';
END
```

Good

```sql
CREATE PROC dbo.zero_return
AS
BEGIN
    RETURN 0;
END
```

## Tips

💡 Only `INT` can be returned from the procedure. A scalar user-defined function must return the datatype specified in its declaration. If the return value in the `RETURN` expression has the wrong datatype, then there will either be a runtime error, or loss of data/accuracy, or something is written with the expectation of implicit datatype conversion.

💡 The rule does not trigger for potential string truncations or `INT`->`SMALLINT` conversions, and does not analyze specific values. In some cases, assumptions about datatype interchangeability are left out in order to reduce potential false positives.
