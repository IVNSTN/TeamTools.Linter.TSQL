
# Unicode symbol lost in operation

|||
|-|-|
| Id | **CS0791**
| Mnemo | NATIONAL_SYMBOL_LOSS
| Severity | ℹ Hint
| Category | [CodeSmell](./Category_CodeSmell.md)
| Source code | [NationalSymbolLossRule.cs](../../../Rules/CodeSmell/NationalSymbolLossRule.cs)

## Cause

This rule is triggered if a value of type `NVARCHAR`, `NCHAR` or `SYSNAME` is assigned to a variable or returned from a function with type `VARCHAR` or `CHAR`.
<p id="descr">Change the type of the variable or return value to support Unicode.</p>

## Examples

Bad

```sql
DECLARE @bar CHAR(5) = N'☀️';     -- 1

SET @bar = CONCAT(N'☀️', '');     -- 2
```

Good

```sql
DECLARE @bar NCHAR(5) = N'☀️';

SET @bar = CONCAT(N'☁️', ' ');
```

## Tips

💡 If the source expression or value can't contain unicode, do not calculate or declare it as unicode.

💡 Expect some "false-positive" results, for example, when assigning `ERROR_MESSAGE()` to variables of the type `VARCHAR`. To make unicode appear, developers need to take some extra steps. In general, an implicit conversion does not pose a threat of information loss. However, it should still be treated as a potential warning, for example, if the error message specifies the value entered by a user in a field/parameter allowing unicode in the user interface.
