

# Table variable inside a function

|||
|-|-|
| Id | **CS0832**
| Mnemo | MAKING_TABLES_IN_FUNC
| Severity | ℹ Hint
| Category | [CodeSmell](./Category_CodeSmell.md)
| Source code | [DeclareTableInFunctionRule.cs](../../../Rules/CodeSmell/DeclareTableInFunctionRule.cs)

## Cause

This rule is triggered when the table variable is declared inside a function.
<p id="descr">Remove table variable.</p>

## Examples

Bad

```sql
CREATE FUNCTION foo.bar (@id INT)
RETURNS @res TABLE
(
    tax         NUMERIC(14, 2) NOT NULL
    , currency  NUMERIC(14, 2) NOT NULL
)
AS
BEGIN
    DECLARE @calc TABLE
    (
        value INT
        , percent INT
    )
END
```

Good

```sql
CREATE FUNCTION foo.bar (@id INT)
RETURNS @res TABLE
(
    tax         NUMERIC(14, 2) NOT NULL
    , currency  NUMERIC(14, 2) NOT NULL
)
AS
BEGIN
    DECLARE @var INT
    RETURN
END
```
