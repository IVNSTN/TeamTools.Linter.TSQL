

# Missing pair of transaction state command

|||
|-|-|
| Id | **CS0920**
| Mnemo | UNPAIRED_TRAN_STATEMENT
| Severity | ℹ Hint
| Category | [CodeSmell](./Category_CodeSmell.md)
| Source code | [UnPairedTransactionInstructionRule.cs](../../../Rules/CodeSmell/UnPairedTransactionInstructionRule.cs)

## Cause

This rule is triggered when one of the paired transaction state commands is missing.
<p id="descr">Specify the pair of transaction state command.</p>

## Examples

Bad

```sql
BEGIN TRAN trn

DELETE dbo.foo WHERE bar = 1
```

Good

```sql
BEGIN TRAN trn;

DELETE dbo.foo WHERE bar = 1;

IF @@TRANCOUNT > 0
    ROLLBACK TRAN trn;
```

## Tips

💡 The rule checks ROLLBACK/COMMIT and BEGIN/SAVE TRAN commands.
