

# Transaction name reused

|||
|-|-|
| Id | **CS0931**
| Mnemo | NAME_REUSED_TRANSACTION
| Severity | ⚠ Warning
| Category | [CodeSmell](./Category_CodeSmell.md)
| Source code | [ReusedTranNameRule.cs](../../../Rules/CodeSmell/ReusedTranNameRule.cs)

## Cause

The rule is triggered if the code uses duplicate names for transactions or save points.
<p id="descr">Replace the duplicate names with unique ones.</p>

## Examples

Bad

```sql
...
SAVE TRANSACTION tran1
...
   SAVE TRANSACTION tran1
...
```

Good

```sql
...
SAVE TRANSACTION tran1
...
   SAVE TRANSACTION tran2
...
```

## Tips

⚠️ Duplicate save point names are allowed in the transaction, but the ROLLBACK TRANSACTION statement containing the save point name rolls back the transaction to the save point of the last SAVE TRANSACTION statement that used that name.

💡 Reusing the transaction name can cause confusion and lead to unexpected results in a complex code flow. In some cases, the code can be compiled and even run, but not with the transaction that was meant.

## Links

[SAVE TRANSACTION](https://learn.microsoft.com/en-us/sql/t-sql/language-elements/save-transaction-transact-sql?view=sql-server-ver16)

[BEGIN TRANSACTION](https://learn.microsoft.com/en-us/sql/t-sql/language-elements/begin-transaction-transact-sql?view=sql-server-ver16)
