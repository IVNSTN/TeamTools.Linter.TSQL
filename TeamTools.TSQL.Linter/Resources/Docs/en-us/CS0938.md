

# [NOT] EXISTS is preferred over IN predicate

|||
|-|-|
| Id | **CS0938**
| Mnemo | EXISTS_INSTEAD_OF_IN
| Severity | ⚠ Warning
| Category | [CodeSmell](./Category_CodeSmell.md)
| Source code | [InSelectToExistsRule.cs](../../../Rules/CodeSmell/InSelectToExistsRule.cs)

## Cause

The rule is triggered if the IN predicate is used to check rows instead of EXISTS.
<p id="descr">Replace the IN predicate with EXISTS.</p>

## Examples

Bad

```sql
...
WHERE object_id IN (SELECT Id FROM dbo.objects WHERE ...)
```

Good

```sql
...
WHERE EXISTS(SELECT Id FROM dbo.objects WHERE Id = object_id AND ...)
```

## Tips

💡 The appropriateness of using EXISTS or IN predicate depends on the context of the query, so it is better to check the final query execution plan.

💡 NOT EXISTS does not depend on the presence of NULL in the result of the subquery. It returns TRUE when no rows are returned from the subquery or zero rows are returned. NOT IN, in turn, cannot compare NULL values. If any row of the subquery returns NULL, the NOT IN operator evaluates the entire expression as FALSE or NULL and does not return entries.

## Links

[Clause NOT](https://learn.microsoft.com/en-us/sql/t-sql/language-elements/not-transact-sql?view=sql-server-ver16)

[Clause IN](https://learn.microsoft.com/en-us/sql/t-sql/language-elements/in-transact-sql?view=sql-server-ver16)

[Clause EXISTS](https://learn.microsoft.com/en-us/sql/t-sql/language-elements/exists-transact-sql?view=sql-server-ver16)

[How NOT IN works with NULL values](https://learn.microsoft.com/en-us/answers/questions/657695/how-works-not-in-with-nulls-value)
