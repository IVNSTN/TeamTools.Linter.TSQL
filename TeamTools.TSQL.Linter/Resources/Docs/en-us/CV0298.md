

# @@FETCH_STATUS as the loop exit cause

|||
|-|-|
| Id | **CV0298**
| Mnemo | CURSOR_INFINITE_LOOP
| Severity | ⚠ Warning
| Category | [CodingConvention](./Category_CodingConvention.md), [Cursors](./Group_Cursors.md)
| Source code | [CursorInfiniteLoopRule.cs](../../../Rules/CodingConvention/CursorInfiniteLoopRule.cs)

## Cause

This rule is triggered when the loop uses @@FETCH_STATUS as the exit cause.
<p id="descr">Move the @@FETCH_STATUS check inside an infinite loop.</p>

## Examples

Bad

```sql
WHILE @@FETCH_STATUS = 0
BEGIN
    PRINT '1';
END
```

Good

```sql
WHILE 1 = 1
BEGIN
    IF @@FETCH_STATUS != 0
        BREAK;

    PRINT '1';
END;
```
