

# Composite foreign key

|||
|-|-|
| Id | **DD0153**
| Mnemo | FK_MULTIPLE_COL
| Severity | ℹ Hint
| Category | [DatabaseDesign](./Category_DatabaseDesign.md)
| Source code | [ForeignKeyOnMultipleColumnRule.cs](../../../Rules/DatabaseDesign/ForeignKeyOnMultipleColumnRule.cs)

## Cause

This rule is triggered when a composite foreign key is used.
<p id="descr">Create a surrogate key.</p>

## Examples

Bad

```sql
CREATE TABLE dbo.foo_types
(
    name CHAR(10) NOT NULL
    , code CHAR(10) NOT NULL
);

CREATE TABLE dbo.foo
(
    id INT NOT NULL PRIMARY KEY
    , type_name CHAR(10) NOT NULL
    , type_code CHAR(10) NOT NULL
    , CONSTRAINT FK_foo_types FOREIGN KEY (type_name, type_code) REFERENCES foo_types(name, code)
);
```

Good

```sql
CREATE TABLE dbo.foo_types
(
    id INT IDENTITY(1, 1) NOT NULL
    , name CHAR(10) NOT NULL
    , code CHAR(10) NOT NULL
);

CREATE TABLE dbo.foo
(
    id INT NOT NULL PRIMARY KEY
    , type_id INT NOT NULL
    , CONSTRAINT FK_foo_types FOREIGN KEY (type_id) REFERENCES foo_types(id)
);
```
