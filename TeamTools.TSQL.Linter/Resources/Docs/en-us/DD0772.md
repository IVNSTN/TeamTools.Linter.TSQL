

# SPARSE column of small size

|||
|-|-|
| Id | **DD0772**
| Mnemo | SMALL_COL_SPARSE
| Severity | ℹ Hint
| Category | [DatabaseDesign](./Category_DatabaseDesign.md)
| Source code | [SmallSizeColumnSparseRule.cs](../../../Rules/DatabaseDesign/SmallSizeColumnSparseRule.cs)

## Cause

This rule is triggered when SPARSE option is used for small size column.
<p id="descr">Remove SPARSE option.</p>

## Examples

Bad

```sql
CREATE TABLE dbo.foo
(
    is_sale   BIT     SPARSE NULL
    , article TINYINT SPARSE NULL
    , code    CHAR(1) SPARSE NULL
);
```

Good

```sql
CREATE TABLE dbo.foo
(
    is_sale   BIT     NULL
    , article TINYINT NULL
    , code    CHAR(1) NULL
);
```

## Tips

💡 To achieve significant space savings with SPARSE columns, there must be a high proportion of NULL values so that the additional 4 bytes required to store each non-NULL value do not exceed the benefits of the optimization.

💡 The rule checks types (for strings n <= 12):

- BIT
- TINYINT
- SMALLINT
- DATE
- TIME
- SMALLDATETIME
- CHAR
- NCHAR
- VARCHAR
- NVARCHAR
- BINARY
- VARBINARY

## Links

[Estimated space savings](https://learn.microsoft.com/en-us/sql/relational-databases/tables/use-sparse-columns?view=sql-server-ver16#estimated-space-savings-by-data-type)
