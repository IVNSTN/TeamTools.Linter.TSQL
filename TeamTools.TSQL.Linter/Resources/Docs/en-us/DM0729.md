

# Unexpected index maintenance

|||
|-|-|
| Id | **DM0729**
| Mnemo | INDEX_MAINTENANCE
| Severity | ⚠ Warning
| Category | [DatabaseMaintenance](./Category_DatabaseMaintenance.md), [Indices](./Group_Indices.md)
| Source code | [IndexMaintenanceRule.cs](../../../Rules/DatabaseMaintenance/IndexMaintenanceRule.cs)

## Cause

This rule is triggered if a DDL statement for index management on a persistent table is found.
<p id="descr">Remove DDL for index management or use temporary objects.</p>

## Examples

Bad

```sql
CREATE INDEX ix_bar ON dbo.bar(id)

ALTER INDEX ix_bar ON dbo.bar REBUILD

DROP INDEX ix_bar ON dbo.bar
```

Good

```sql
CREATE INDEX #ix ON #tmp(id)

ALTER INDEX #ix ON #tmp REBUILD

DROP INDEX #ix ON #tmp
```

## Tips

💡 Index maintenance for temporary tables (#) and table variables (@) is allowed.

💡 It is allowed to use index creation statements (CREATE) in table declaration files (CREATE TABLE).

💡 Utility and administrative stored procedures should be organized within dedicated schemas and databases.
