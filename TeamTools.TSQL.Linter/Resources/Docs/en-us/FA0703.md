

# COLUMNSTORE index cannot contain columns of this type

|||
|-|-|
| Id | **FA0703**
| Mnemo | BAD_TYPE_FOR_COLUMNSTORE
| Severity | ⛔ Error
| Category | [Failure](./Category_Failure.md), [Indices](./Group_Indices.md)
| Source code | [BadTypeForColumnstoreIndexRule.cs](../../../Rules/Failure/BadTypeForColumnstoreIndexRule.cs)

## Cause

This rule is triggered when the COLUMNSTORE index contains columns whose types are not supported.
<p id="descr">Remove columns whose types are not supported, or refuse the index if it is a clustered.</p>

## Examples

Bad

```sql
CREATE TABLE dbo.Orders
(
    dt             DATETIME   NOT NULL
    , SignType     INT        NULL
    , OrderChannel ROWVERSION NULL
    , Flags        XML        NULL
);
GO

CREATE CLUSTERED COLUMNSTORE INDEX clcs_Orders
    ON dbo.Orders
    WITH (DATA_COMPRESSION = COLUMNSTORE_ARCHIVE);
GO
```

Good

```sql
CREATE TABLE dbo.Orders
(
    dt             DATETIME NOT NULL
    , SignType     INT      NULL
    , OrderChannel INT      NULL
    , Flags        BIGINT   NULL
);
GO

CREATE CLUSTERED COLUMNSTORE INDEX clcs_Orders
    ON dbo.Orders
    WITH (DATA_COMPRESSION = COLUMNSTORE_ARCHIVE);
GO
```

## Links

💡 [Limitations and restrictions COLUMNSTORE](https://learn.microsoft.com/en-us/sql/t-sql/statements/create-columnstore-index-transact-sql?view=sql-server-ver16#LimitRest)
