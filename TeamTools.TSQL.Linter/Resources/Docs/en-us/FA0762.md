

# Option is not allowed for in-memory table

|||
|-|-|
| Id | **FA0762**
| Mnemo | INMEMORY_RESTRICTED_TABLE_OPTIONS
| Severity | ⛔ Error
| Category | [Failure](./Category_Failure.md), [InMemory](./Group_InMemory.md)
| Source code | [InMemoryRestrictedTableOptionsRule.cs](../../../Rules/Failure/InMemoryRestrictedTableOptionsRule.cs)

## Cause

This rule is triggered when option is not allowed for in-memory table.
<p id="descr">Remove unsupported option.</p>

## Examples

Bad

```sql
CREATE TABLE foo.bar
(
    sys_name        VARCHAR(20)  NOT NULL
    , sign_datetime DATETIME2(0) NOT NULL
    , CONSTRAINT PK_foo_bar PRIMARY KEY NONCLUSTERED HASH (sys_name) WITH (BUCKET_COUNT = 8000000)
)
WITH (MEMORY_OPTIMIZED = ON, DURABILITY = SCHEMA_AND_DATA, DATA_COMPRESSION = PAGE);
```

Good

```sql
CREATE TABLE foo.bar
(
    sys_name        VARCHAR(20)  NOT NULL
    , sign_datetime DATETIME2(0) NOT NULL
    , CONSTRAINT PK_foo_bar PRIMARY KEY NONCLUSTERED HASH (sys_name) WITH (BUCKET_COUNT = 8000000)
)
WITH (MEMORY_OPTIMIZED = ON, DURABILITY = SCHEMA_AND_DATA);
```

## Links

💡 [Unsupported SQL Server Features for In-Memory OLTP](https://learn.microsoft.com/en-us/sql/relational-databases/in-memory-oltp/unsupported-sql-server-features-for-in-memory-oltp?view=sql-server-ver16)
