

# SPARSE column not allowed in primary key or clustered index

|||
|-|-|
| Id | **FA0769**
| Mnemo | SPARSE_CANNOT_BE_KEY
| Severity | ⛔ Error
| Category | [Failure](./Category_Failure.md), [Indices](./Group_Indices.md)
| Source code | [SparseCannotBeKeyRule.cs](../../../Rules/Failure/SparseCannotBeKeyRule.cs)

## Cause

This rule is triggered when SPARSE columns is included to primary key or clustered index.
<p id="descr">Remove SPARSE columns from primary key or clustered index.</p>

## Examples

Bad

```sql
CREATE TABLE dbo.bar
(
    col BIT SPARSE NULL
    , INDEX ix CLUSTERED (col)
)
```

Good

```sql
CREATE TABLE dbo.bar
(
    id INT NOT NULL
    , col BIT SPARSE NULL
    , INDEX ix CLUSTERED (id)
)
```

## Links

💡 [Restrictions for using sparse columns](https://learn.microsoft.com/en-us/sql/relational-databases/tables/use-sparse-columns?view=sql-server-ver16#restrictions-for-using-sparse-columns)
