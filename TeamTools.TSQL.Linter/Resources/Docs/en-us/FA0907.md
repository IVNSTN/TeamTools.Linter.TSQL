

# Partitioned unique index key must include partitioning column

|||
|-|-|
| Id | **FA0907**
| Mnemo | UNIQUE_INDEX_MISSING_PARTITIONED_COL
| Severity | ⛔ Error
| Category | [Failure](./Category_Failure.md), [Indices](./Group_Indices.md)
| Source code | [UniqueIndexMissingPartitionedColRule.cs](../../../Rules/Failure/UniqueIndexMissingPartitionedColRule.cs)

## Cause

The rule is triggered if the index is partitioned and it is unique, and the index key does not contain a partitioning key.
<p id="descr">Specify the partitioning key in the index.</p>

## Examples

Bad

```sql
CREATE TABLE dbo.PartitionTable (ins_date datetime2(0) , value_bar char(10)) ON myRangePS1 (ins_date);
CREATE UNIQUE INDEX ix_dbo_partitiontable_value_bar ON dbo.PartitionTable (value_bar) ON myRangePS1(ins_date);
```

Good

```sql
CREATE TABLE dbo.PartitionTable (ins_date datetime2(0) , value_bar char(10)) ON myRangePS1 (ins_date);
CREATE UNIQUE INDEX ix_dbo_partitiontable_value_bar ON dbo.PartitionTable (ins_date, value_bar) ON myRangePS1(ins_date);
```

## Links

[Partitioned tables and indexes](https://learn.microsoft.com/en-us/sql/relational-databases/partitions/partitioned-tables-and-indexes?view=sql-server-ver16)
