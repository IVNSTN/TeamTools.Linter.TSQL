
# Window definition missing required ORDER BY clause

|||
|-|-|
| Id | **FA0912**
| Mnemo | WINDOW_MISSING_ORDERBY
| Severity | ⛔ Error
| Category | [Failure](./Category_Failure.md)
| Source code | [WindowFunctionRequiresOrderByRule.cs](../../../Rules/Failure/WindowFunctionRequiresOrderByRule.cs)

## Cause

The rule is triggered if sorting is not specified in OVER clause for certain window functions, where sorting is required.
<p id="descr">Specify the sorting in the window function.</p>

## Examples

Bad

```sql
SELECT ROW_NUMBER() OVER(PARTITION BY ord.order_type) AS rn, ord.order_id
FROM dbo.orders AS ord;
```

Good

```sql
SELECT ROW_NUMBER() OVER(PARTITION BY ord.order_type ORDER BY ord.order_date) AS rn, ord.order_id
FROM dbo.orders AS ord;
```

## Tips
    
💡 The 'COUNT() OVER()' function and other aggregate window functions may not contain an ORDER BY statement in the OVER clause.

💡 ORDER BY — defines the logical order of the rows in each section of the result set.
    
## Links

[SELECT - OVER Clause](https://learn.microsoft.com/en-us/sql/t-sql/queries/select-over-clause-transact-sql?view=sql-server-ver16)

[Ranking Functions](https://learn.microsoft.com/en-us/sql/t-sql/functions/ranking-functions-transact-sql?view=sql-server-ver16)

[Aggregate Functions](https://learn.microsoft.com/en-us/sql/t-sql/functions/aggregate-functions-transact-sql?view=sql-server-ver16)

[Analytic functions](https://learn.microsoft.com/en-us/sql/t-sql/functions/analytic-functions-transact-sql?view=sql-server-ver16)