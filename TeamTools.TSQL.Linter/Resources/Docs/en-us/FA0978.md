

# Function cannot contain such command

|||
|-|-|
| Id | **FA0978**
| Mnemo | FUNCTION_HAS_ILLEGAL_CODE
| Severity | ⛔ Error
| Category | [Failure](./Category_Failure.md)
| Source code | [FunctionHasIllegalCodeRule.cs](../../../Rules/Failure/FunctionHasIllegalCodeRule.cs)

## Cause

The rule is triggered if an invalid expression is used in the function.
<p id="descr">Remove the invalid expression from the function.</p>

## Examples

Bad

```sql
CREATE FUNCTION dbo.func (@value INT, @divider INT)
RETURNS INT
AS
BEGIN
    DECLARE @res INT;
    
    IF @divider = 0
        RAISERROR('Divide by zero error encountered', 16, 1);

    SET @res = @value / @divider;

    RETURN @res;
END;
```

Good

```sql
CREATE FUNCTION dbo.func (@value INT, @divider INT)
RETURNS INT
AS
BEGIN
    DECLARE @res INT;

    SET @res = @value / @divider;

    RETURN @res;
END;
```

## Tips

⚠️ Some expressions are not allowed in functions: THROW, RAISERROR, EXEC

## Links

[Create user-defined functions](https://learn.microsoft.com/en-us/sql/relational-databases/user-defined-functions/create-user-defined-functions-database-engine?view=sql-server-ver16&redirectedfrom=MSDN#Restrictions)
