

# Multiple columns are illegal in scalar subquery

|||
|-|-|
| Id | **FA0989**
| Mnemo | SCALAR_QUERY_MULTIPLE_COL
| Severity | ⛔ Error
| Category | [Failure](./Category_Failure.md)
| Source code | [MultipleColumnsInScalarSubqueryRule.cs](../../../Rules/Failure/MultipleColumnsInScalarSubqueryRule.cs)

## Cause

The rule is triggered if the scalar subquery has multiple columns in SELECT statement.
<p id="descr">Specify one column in the scalar subquery.</p>

## Examples

Bad

```sql
SELECT
    ord.client_id
    , (SELECT pr.type_id, pr.amount FROM dbo.product_types AS pr WHERE pr.order_id = ord.order_id) AS tpam
FROM dbo.orders AS ord;
```

Good

```sql
SELECT
    ord.client_id
    , (SELECT pr.amount FROM dbo.product_types AS pr WHERE pr.order_id = ord.order_id) AS am
FROM dbo.orders AS ord;
```

## Tips

💡 Scalar subquery - a subquery that returns one value.

## Links

[Subqueries (SQL Server)](https://learn.microsoft.com/en-us/sql/relational-databases/performance/subqueries?view=sql-server-ver16#rules)

