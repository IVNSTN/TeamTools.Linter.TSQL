

# Partition ranges hardcoded

|||
|-|-|
| Id | **HD0121**
| Mnemo | PARTITIONS_HARDCODED
| Severity | ⚠ Warning
| Category | [Hardcode](./Category_Hardcode.md)
| Source code | [PartitionRangeListRule.cs](../../../Rules/Hardcode/PartitionRangeListRule.cs)

## Cause

This rule is triggered when partition ranges are detected in the compression options of partitioned tables or indexes.
<p id="descr">Remove the explicit partition ranges and specify the compression granularity once.</p>

## Examples

Bad

```sql
CREATE TABLE dbo.my_table
(
    id INT NOT NULL PRIMARY KEY CLUSTERED WITH (DATA_COMPRESSION = PAGE ON PARTITIONS(1), DATA_COMPRESSION = PAGE ON PARTITIONS(2))
)
WITH (DATA_COMPRESSION = PAGE ON PARTITIONS(1), DATA_COMPRESSION = PAGE ON PARTITIONS(2));

CREATE INDEX IX_FOO
    ON dbo.BAR (t)
    WITH (DATA_COMPRESSION = PAGE ON PARTITIONS(1), DATA_COMPRESSION = PAGE ON PARTITIONS(2))
    ON f(r);
```

Good

```sql
CREATE TABLE dbo.my_table
(
    id INT NOT NULL PRIMARY KEY CLUSTERED WITH (DATA_COMPRESSION = PAGE)
)
WITH (DATA_COMPRESSION = PAGE);

CREATE INDEX IX_FOO
    ON dbo.BAR (t)
    WITH (DATA_COMPRESSION = PAGE)
    ON f(r);
```

## Tips

💡Instead of listing sections, specify the compression granularity only once:

```sql
WITH (DATA_COMPRESSION = PAGE)
WITH (DATA_COMPRESSION = COLUMNSTORE_ARCHIVE)
```
