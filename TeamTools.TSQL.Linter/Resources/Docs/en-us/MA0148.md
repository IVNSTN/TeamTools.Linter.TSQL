
# Non-unique error number / state

|||
|-|-|
| Id | **MA0148**
| Mnemo | UNIQUE_ERR_NO_OR_STATE
| Severity | ⚠ Warning
| Category | [Maintainablity](./Category_Maintainablity.md)
| Source code | [UniqueErrorNumberOrStateRule.cs](../../../Rules/Maintainability/UniqueErrorNumberOrStateRule.cs)

## Cause

This rule is triggered if a non-unique combination of number and state of the generated exception is detected.
<p id="descr">Give the exception a unique combination of number and state.</p>

## Examples

Bad

```sql
DECLARE
    @errortext VARCHAR(100)
    , @state   INT;

RAISERROR(@errortext, 16, 0);
RAISERROR('err', 16, @state);
RAISERROR(50000, 16, 0);

THROW 50000, 'err', 1;
THROW 50000, 'err', 1;
```

Good

```sql
RAISERROR ('err', 16, 1);
RAISERROR ('err', 16, 2);

RAISERROR (50001, 16, 0);
RAISERROR (50002, 16, 0);

THROW 50003, 'err', 0;
THROW 50004, 'err', 0;

THROW 50000, 'err', 4;
THROW 50000, 'err', 5;
```

## Tips

💡 Each exception must have either a unique `ERROR_NUMBER` or a `ERROR_STATE`.

💡 Debugging and monitoring of code that generate the same exception for any reason is extremely inconvenient. A unique exception number and state allows you to localize the source of the problem much faster.
