

# Exit if ROWCOUNT=0 not implemented

|||
|-|-|
| Id | **PF0140**
| Mnemo | TRIGGER_EXIT_ON_NO_ROWS
| Severity | ⚠ Warning
| Category | [Performance](./Category_Performance.md), [Triggers](./Group_Triggers.md)
| Source code | [TriggerExitIfNoRowsRule.cs](../../../Rules/Performance/TriggerExitIfNoRowsRule.cs)

## Cause

<p id="descr">The trigger does not start by checking if there are no rows, and it exits if that's the case.</p>

## Examples

Bad

```sql
CREATE TRIGGER dbo.acc_types_u_after
ON dbo.acc_types
AFTER UPDATE
AS
BEGIN
    SET NOCOUNT ON;
```

Good

```sql
CREATE TRIGGER dbo.acc_types_u_after
ON dbo.acc_types
AFTER UPDATE
AS
BEGIN
    IF @@ROWCOUNT = 0
    BEGIN
        RETURN;
    END;

    SET NOCOUNT ON;
```

## Tips

💡 The primary focus is on ensuring consistent behavior and implementation of triggers. At the beginning of any trigger, the following block is expected:
```sql
IF @@ROWCOUNT = 0
BEGIN
    RETURN;
END
```
Only comments are allowed before this block.

💡 To obtain the row count, it's recommended to use SELECT COUNT from system tables, because the @@ROWCOUNT variable might have an incorrect value after a MERGE operation.
