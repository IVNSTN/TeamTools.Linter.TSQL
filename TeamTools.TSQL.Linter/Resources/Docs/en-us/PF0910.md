

# Indexing column allowing NULL/with default defined without filter on default value

|||
|-|-|
| Id | **PF0910**
| Mnemo | INDEXING_COL_WITH_DEFAULT
| Severity | ℹ Hint
| Category | [Performance](./Category_Performance.md), [Indices](./Group_Indices.md)
| Source code | [UniqueIndexOnColumnWithDefaultRule.cs](../../../Rules/Performance/UniqueIndexOnColumnWithDefaultRule.cs)

## Cause

<p id="descr">If a column contains a default value, indexing that column will have poor selectivity. Excluding rows with the default value from the index can greatly improve its effectiveness.</p>

## Examples

Bad

```sql
CREATE TABLE dbo.foo
(
    id          INT NOT NULL PRIMARY KEY
    , parent_id INT NOT NULL DEFAULT 0
    , UNIQUE (parent_id)
)

CREATE UNIQUE INDEX IU_dbo_foo_parent_id ON dbo.foo(parent_id)
```

Good

```sql
CREATE TABLE dbo.foo
(
    id          INT NOT NULL PRIMARY KEY
    , parent_id INT NOT NULL -- not null no default
    , UNIQUE (parent_id)
    , INDEX IU_dbo_foo_parent_id UNIQUE (parent_id)
)

CREATE UNIQUE INDEX IU_dbo_foo_parent_id ON dbo.foo(parent_id)
```

## Tips

💡 The issue may not be with the index itself, but rather with the field definition or the selected approach to task implementation.

💡 Simply removing the DEFAULT constraint without improving the field's selectivity will not address the issue highlighted by the linter.
