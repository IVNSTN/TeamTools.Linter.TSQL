
# Indexing column allowing NULL/with default defined without filter on default value

|||
|-|-|
| Id | **PF0910**
| Mnemo | INDEXING_COL_WITH_DEFAULT
| Severity | ℹ Hint
| Category | [Performance](./Category_Performance.md), [Indices](./Group_Indices.md)
| Source code | [UniqueIndexOnColumnWithDefaultRule.cs](../../../Rules/Performance/UniqueIndexOnColumnWithDefaultRule.cs)

## Cause

This rule is triggered if the index uses a column that has a default value or allows `NULL`, and this value is not filtered.
<p id="descr">Filter out the default values.</p>

## Examples

Bad

```sql
CREATE TABLE dbo.foo
(
    id          INT NOT NULL PRIMARY KEY
    , parent_id INT NOT NULL DEFAULT 0
    , UNIQUE (parent_id)
)

CREATE UNIQUE INDEX IU_dbo_foo_parent_id ON dbo.foo(parent_id)
```

Good

```sql
CREATE TABLE dbo.foo
(
    id          INT NOT NULL PRIMARY KEY
    , parent_id INT NOT NULL -- not null no default
    , UNIQUE (parent_id)
    , INDEX IU_dbo_foo_parent_id UNIQUE (parent_id)
)

CREATE UNIQUE INDEX IU_dbo_foo_parent_id ON dbo.foo(parent_id)
```

## Tips

💡 If a column has a default value, then the index for this column will have poor selectivity. If you exclude rows with a default value from indexing, the index will become much more useful.

💡 The issue may not be with the index itself, but rather with the column definition or the selected approach to task implementation.

💡 Simply removing the `DEFAULT` constraint without improving the column's selectivity will not address the issue highlighted by the linter.
