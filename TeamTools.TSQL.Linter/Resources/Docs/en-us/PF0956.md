
# Consider turning filter into SARGable LIKE

|||
|-|-|
| Id | **PF0956**
| Mnemo | SUBSTRING_TO_LIKE
| Severity | ⚠ Warning
| Category | [Performance](./Category_Performance.md)
| Source code | [SubstringPredicateToLikeRule.cs](../../../Rules/Performance/SubstringPredicateToLikeRule.cs)

## Cause

This rule is triggered when a column value is truncated using `LEFT` or `SUBSTRING` (when extracting the first character) and compared to a scalar value.
<p id="descr">Rewrite using LIKE.</p>

## Examples

Bad

```sql
SELECT env.var_name
FROM dbo.environment env
WHERE SUBSTRING(env.var_name, 1, 3) = 'GF_'
```

Good

```sql
SELECT env.var_name
FROM dbo.environment env
WHERE env.var_name LIKE 'GF[_]%'
```

## Tips

💡 The rule responds to the use of string functions `LEFT` and `SUBSTRING` (when extracting from the first character) in the `WHERE` clause. These functions are non-sargable. However, a `LIKE` clause with a known string prefix, such as `LIKE 'a%'`, is sargable. If there is an index on the filtered field, it will perform a `SEEK` instead of a `SCAN`.

💡 If the scalar value being compared includes characters that `LIKE` interprets as special characters (`[`, `]`, `%`, `_`), these characters must be escaped when converting to a `LIKE` clause.
