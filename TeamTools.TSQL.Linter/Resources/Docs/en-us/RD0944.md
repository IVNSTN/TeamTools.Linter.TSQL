

# [NOT] EXISTS is preferred over COUNT predicate

|||
|-|-|
| Id | **RD0944**
| Mnemo | EXISTS_INSTEAD_OF_COUNT
| Severity | ⚠ Warning
| Category | [Redundancy](./Category_Redundancy.md)
| Source code | [RedundantCountRule.cs](../../../Rules/Redundancy/RedundantCountRule.cs)

## Cause

This rule is triggered when SELECT COUNT() is used to determine whether a dataset contains rows.
<p id="descr">Use EXISTS to determine whether rows exist.</p>

## Examples

Bad

```sql
IF (SELECT COUNT(1) FROM dbo.bar) > 0
    RETURN 1

SELECT 1
FROM dbo.foo
WHERE (SELECT COUNT((1)) FROM dbo.bar) >= 0
```

Good

```sql
IF EXISTS (SELECT COUNT(1) FROM dbo.bar)
    RETURN 1

SELECT 1
FROM dbo.foo
WHERE (SELECT COUNT(*) * 2 FROM dbo.bar) >= 1
```

## Tips

💡 To calculate COUNT, you need to go through the entire data set, and EXISTS is a SEMI JOIN and stops execution at the first match.

💡 From the point of code readability, EXISTS is also preferable, since it clearly indicates that you need to check for the presence/absence of a rows, while calculating the counter creates the illusion that you are interested in the quantity. It's possible, there were intention to compare not with zero, but with 42 or something else, which only confuses.
