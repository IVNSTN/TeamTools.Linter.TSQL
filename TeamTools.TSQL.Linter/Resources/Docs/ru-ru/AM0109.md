

# Идентификатор таблицы без указания схемы

|||
|-|-|
| Id | **AM0109**
| Мнемо | TABLE_REF_SCHEMA
| Серьёзность | ⚠ Предупреждение
| Категория | [Неоднозначность](./Категория_Неоднозначность.md)
| Исходный код | [SchemaQualifiedTableReferenceRule.cs](../../../Rules/Ambiguity/SchemaQualifiedTableReferenceRule.cs)

## Причина

<p id="descr">Правило срабатывает, если идентификатор таблицы в инструкции не содержит схему.</p>

## Примеры

Некорректно

```sql
CREATE INDEX idx_dbo_employee_key ON employee (key);

CREATE TRIGGER dbo.employee_sync
ON employee
...

SELECT key FROM employee;
```

Корректно

```sql
CREATE INDEX idx_dbo_employee_key ON dbo.employee (key);

CREATE TRIGGER dbo.employee_sync
ON dbo.employee
...

SELECT key FROM dbo.employee;
```

## Подсказки

💡 Разные пользователи могут иметь разные DEFAULT_SCHEMA, за исключением членов роли sysadmin. Таблица должна идентифицировать с использованием схемы, чтобы избежать путаницы.

💡 Если схема не указана в запросе, то кэш запроса не может быть использован другим пользователем. Это может привести к пустой трате вычислительных ресурсов.

## Ссылки

[ALTER USER. Замечания.](https://learn.microsoft.com/en-us/sql/t-sql/statements/alter-user-transact-sql?view=sql-server-ver15&redirectedfrom=MSDN#remarks)
[Почему следует всегда указывать схему в запросах.](https://www.red-gate.com/simple-talk/blogs/why-you-should-always-use-schema-name-in-queries/)
