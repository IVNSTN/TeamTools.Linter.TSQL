

# Используйте DATEPART вместо YEAR(), MONTH(), DAY()

|||
|-|-|
| Id | **CD0277**
| Мнемо | DATE_FN_IN_CONSTRAINT
| Серьёзность | ⚠ Предупреждение
| Категория | [НепрерывнаяПоставка](./Категория_НепрерывнаяПоставка.md)
| Исходный код | [DateFunctionsInConstraintRule.cs](../../../Rules/ContinuousDeployment/DateFunctionsInConstraintRule.cs)

## Причина

Срабатывает из-за использования функций YEAR(), MONTH(), DAY() в ограничениях.  На временные таблицы и табличные переменные не реагирует.
<p id="descr">Используйте функцию DATEPART().</p>

## Примеры

Некорректно

```sql
CREATE TABLE foo 
(
    bar DATETIME NOT NULL
    , mar AS YEAR(bar)
);
```

Корректно

```sql
CREATE TABLE foo 
(
    bar DATETIME NOT NULL
    , mar AS DATEPART(YEAR, bar)
);
```

## Подсказки

💡 Функции сами по себе нормальные, но DacFx при публикации конвертирует их как раз в DATEPART и так получается "вечный дифф".
