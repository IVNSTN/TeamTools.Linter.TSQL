

# Именованное ограничение на временной таблице

|||
|-|-|
| Id | **CS0107**
| Мнемо | TMP_NAMED_CONSTRAINT
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [ConstraintNameInTempTableRule.cs](../../../Rules/CodeSmell/ConstraintNameInTempTableRule.cs)

## Причина

Правило срабатывает, если обнаружено именованное ограничение на временной таблице.
<p id="descr">Удалите имя ограничения.</p>

## Примеры

Некорректно

```sql
CREATE TABLE #foo
(
    bar INT NOT NULL CONSTRAINT DF_foo_bar DEFAULT 1
    , CONSTRAINT #pk PRIMARY KEY (bar)
)
```

Корректно

```sql
CREATE TABLE #foo
(
    bar INT NOT NULL CONSTRAINT DEFAULT 1
    , PRIMARY KEY (bar)
)
```

## Подсказки

⚠️ Во временных таблицах (#) крайне не рекомендуется именовать ограничения, т.к. они хранятся не в контексте таблицы, а в контексте tempdb и могут легко пересечься по названиям (будет ошибка про уникальность имени ограничения) с другим процессом, хотя сами временные таблицы могут быть изолированы и "невидимы" между этими процессами.

⚠️ Именованные ограничения во временных таблицах блокируют возможность кеширования метаданных таблицы, что может негативно сказаться на производительности часто вызываемых хранимых процедур.
