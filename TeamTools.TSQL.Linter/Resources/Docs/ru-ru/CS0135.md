

# Запрещенная подсказка оптимизатору запросов

|||
|-|-|
| Id | **CS0135**
| Мнемо | BAD_QUERY_HINT
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [QueryHintsRule.cs](../../../Rules/CodeSmell/QueryHintsRule.cs)

## Причина

Правило срабатывает, если обнаружено использование запрещенной подсказки оптимизатору запросов (`HINT`) уровня таблицы или запроса.
<p id="descr">Удалите запрещенную подсказку оптимизатору (HINT).</p>

## Примеры

Некорректно

```sql
SELECT bar.aa FROM dbo.bar AS bar WITH (NOLOCK, INDEX = asfd)
    INNER JOIN dbo.foo AS foo WITH (IGNORE_TRIGGERS) ON bar.aa = foo.bb
OPTION (FAST 10, FORCE ORDER);
```

Корректно

```sql
SELECT bar.aa FROM dbo.bar AS bar WITH (INDEX = asfd)
    INNER JOIN dbo.foo AS foo ON bar.aa = foo.bb;
```

## Подсказки

💡 К запрещенным относятся следующие подсказки оптимизатору запросов:

- `NOLOCK`
- `IGNORE_TRIGGERS`
- `FAST <N>`

## Ссылки

[Подсказки запросов](https://learn.microsoft.com/ru-ru/sql/t-sql/queries/hints-transact-sql-query?view=sql-server-ver16)
