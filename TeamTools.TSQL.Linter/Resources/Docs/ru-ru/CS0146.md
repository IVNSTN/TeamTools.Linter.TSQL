

# Использование типа SYSNAME для переменных

|||
|-|-|
| Id | **CS0146**
| Мнемо | SYSNAME_FOR_SCALAR_VAR
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [SysnameTypeForScalarVariableRule.cs](../../../Rules/CodeSmell/SysnameTypeForScalarVariableRule.cs)

## Причина

Правило срабатывает, если обнаружено использование  `SYSNAME` для задания типа переменной или возвращаемого значения.
<p id="descr">Используйте строковый тип с явным указанием размера.</p>

## Примеры

Некорректно

```sql
CREATE FUNCTION foo (@param SYSNAME)
RETURNS SYSNAME
AS
BEGIN
    RETURN '';
END;
```

Корректно

```sql
CREATE FUNCTION bar (@param INT)
RETURNS VARCHAR(10)
AS
BEGIN
    RETURN '';
END;
```

## Подсказки

💡 Тип `SYSNAME` — это предоставляемый системой определяемый пользователем тип данных, который функционально эквивалентен типу `NVARCHAR(128)`, за исключением того, что он не допускает значения `NULL`.

💡 Тип `SYSNAME` появляется там, где от него ожидают какой-то магии. Заканчивается это, как правило, тем, что код пишется без понимания, какой длины и какой битности строки фактически используются. Одни ожидают, что `SYSNAME` всегда влезет в однобитную строку длиной 50 символов, другие искренне верят, что `SYSNAME` - это же для имени объекта, значит, четырехзвенное имя объекта вкладывать в один `SYSNAME` - это вполне корректно и разумно.

## Ссылки

[nchar и nvarchar](https://docs.microsoft.com/ru-ru/sql/t-sql/data-types/nchar-and-nvarchar-transact-sql?view=sql-server-ver16)
