
# COMMIT в CATCH не ожидается

|||
|-|-|
| Id | **CS0151**
| Мнемо | COMMIT_IN_CATCH
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [CommitInCatchRule.cs](../../../Rules/CodeSmell/CommitInCatchRule.cs)

## Причина

Правило срабатывает, если в CATCH встречается COMMIT.
<p id="descr">Откатите транзакцию или заблокируйте ошибку и обработайте данные за пределами CATCH.</p>

## Примеры

Некорректно

```sql
BEGIN CATCH
    COMMIT;
END CATCH;
```

Корректно

```sql
BEGIN CATCH
    IF (@@TRANCOUNT > 0)
    BEGIN
        ROLLBACK TRANSACTION;
    END;
END CATCH;
```
