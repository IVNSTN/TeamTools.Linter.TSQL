
# Недопустимое значение серьезности ошибки

|||
|-|-|
| Id | **CS0176**
| Мнемо | RAISERROR_VALID_SEVERITY
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [RaisErrorSeverityValueRule.cs](../../../Rules/CodeSmell/RaisErrorSeverityValueRule.cs)

## Причина

Правило срабатывает, если ERROR_SEVERITY находятся вне диапазона 0-17.
<p id="descr">Укажите значение ERROR_SEVERITY из диапазона 0-17.</p>

## Примеры

Некорректно

```sql
BEGIN TRY
    DECLARE @ErrorMessage NVARCHAR(4000);
    DECLARE @ErrorSeverity INT;
    DECLARE @ErrorState INT;

    SET @ErrorMessage = 'This is a test error';
    SET @ErrorSeverity = 25;
    SET @ErrorState = 122;

    RAISERROR(@ErrorMessage, @ErrorSeverity, @ErrorState);
END TRY
BEGIN CATCH
    SELECT
        ERROR_MESSAGE() AS ErrorMessage,
        ERROR_SEVERITY() AS ErrorSeverity,
        ERROR_STATE() AS ErrorState;
END CATCH;
```

Корректно

```sql
BEGIN TRY
    DECLARE @ErrorMessage NVARCHAR(4000);
    DECLARE @ErrorSeverity INT;
    DECLARE @ErrorState INT;

    SET @ErrorMessage = 'This is a test error';
    SET @ErrorSeverity = 16;
    SET @ErrorState = 122;

    RAISERROR(@ErrorMessage, @ErrorSeverity, @ErrorState);
END TRY
BEGIN CATCH
    SELECT
        ERROR_MESSAGE() AS ErrorMessage,
        ERROR_SEVERITY() AS ErrorSeverity,
        ERROR_STATE() AS ErrorState;
END CATCH;
```

## Ссылки

[RAISERROR](https://learn.microsoft.com/ru-ru/sql/t-sql/language-elements/raiserror-transact-sql?view=sql-server-ver16)
