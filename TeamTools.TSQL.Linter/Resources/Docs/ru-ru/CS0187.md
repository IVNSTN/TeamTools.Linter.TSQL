

# Управление транзакцией в триггере

|||
|-|-|
| Id | **CS0187**
| Мнемо | TRAN_CONTROL_IN_TRIGGER
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md), [Триггеры](./Группа_Триггеры.md)
| Исходный код | [TransactionControlInTriggerRule.cs](../../../Rules/CodeSmell/TransactionControlInTriggerRule.cs)

## Причина

Правило срабатывает, если в триггере происходит управление транзакцией.
<p id="descr">Удалите управление транзакцией.</p>

## Примеры

Некорректно

```sql
CREATE TRIGGER trg ON dbo.foo
AFTER UPDATE
AS
BEGIN
    BEGIN TRAN;
    ...
    COMMIT TRAN;
END;
```

Корректно

```sql
CREATE TRIGGER trg ON dbo.foo
AFTER UPDATE
AS
BEGIN
    ...
END;
```

## Подсказки

💡 Используйте THROW чтобы сообщить об ошибках внешней транзакции.
