

# Циклический вызов триггера

|||
|-|-|
| Id | **CS0198**
| Мнемо | TRIGGER_CIRCULAR_ACTION
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [TriggerCircularActionRule.cs](../../../Rules/CodeSmell/TriggerCircularActionRule.cs)

## Причина

Правило срабатывает, если в AFTER триггере происходит действие, вызывающее циклический запуск триггера.
<p id="descr">Удалите инструкцию, вызывающую циклический запуск триггера.</p>

## Примеры

Некорректно

```sql
CREATE TRIGGER dbo.trg ON dbo.foo
AFTER INSERT, UPDATE
AS
BEGIN
    INSERT dbo.foo(title)
    VALUES ('asdf')
END
```

Корректно

```sql
CREATE TRIGGER dbo.trg ON dbo.foo
AFTER INSERT, UPDATE
AS
BEGIN
    INSERT dbo.table(title)
    VALUES ('asdf')
END
```

## Подсказки

💡 Правило проверяет:

- UPDATE в AFTER UPDATE
- INSERT в AFTER INSERT
- DELETE в AFTER DELETE

💡 Правило не срабатывает для INSTEAD OF триггеров т.к. они не срабатывают циклически.
