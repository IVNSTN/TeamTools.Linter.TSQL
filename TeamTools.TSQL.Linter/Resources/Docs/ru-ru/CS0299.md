

# В IIF вложены операторы ветвления или запросы

|||
|-|-|
| Id | **CS0299**
| Мнемо | COMPLICATED_IIF_TO_CASE
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [IifWithNestedConditionsToCaseRule.cs](../../../Rules/CodeSmell/IifWithNestedConditionsToCaseRule.cs)

## Причина

Правило срабатывает, если в IIF вложены операторы ветвления или запросы.
<p id="descr">Упростите IIF, или используйте CASE.</p>

## Примеры

Некорректно

```sql
SET @bit = IIF(CASE @a WHEN 'a' THEN 1 ELSE 0 END = 1, 1, 0);
```

Корректно

```sql
SET @bit = CASE @a WHEN 'a' THEN 1 ELSE 0 END;
```
