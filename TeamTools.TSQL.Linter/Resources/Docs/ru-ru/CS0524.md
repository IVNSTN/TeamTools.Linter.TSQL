

# Неожиданное шифрование данных

|||
|-|-|
| Id | **CS0524**
| Мнемо | DATA_ENCRYPTED
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [DataEncryptedRule.cs](../../../Rules/CodeSmell/DataEncryptedRule.cs)

## Причина

Правило срабатывает если обнаружено шифрование таблиц или сообщений сервис-брокера.
<p id="descr">Проверьте необходимость шифрования данных.</p>

## Примеры

Некорректно

```sql
...
BEGIN DIALOG CONVERSATION @dialog_handle
   FROM SERVICE [...]
   TO SERVICE '...'
   ON CONTRACT [...]
   WITH ENCRYPTION = ON ;
...
```

Корректно

```sql
...
BEGIN DIALOG CONVERSATION @dialog_handle
   FROM SERVICE [...]
   TO SERVICE '...'
   ON CONTRACT [...];
...
```

## Подсказки

💡 Шифрование таблиц и сообщений сервис-брокера используется нечасто. Если вы не применяете шифрование ко всем данным без исключения, то, возможно, в данном случае оно не требуется.

💡 При принятии решения о том, следует ли реализовать шифрование, рассмотрите способ доступа пользователей к данным. Если пользователи получают доступ к данным через открытую сеть, то шифрование может потребоваться для повышения безопасности. Однако если весь доступ осуществляется по безопасной внутренней сети, то шифрование не требуется. Использование шифрования включает политику управления паролями, ключами и сертификатами.

## Ссылки

[Шифрование SQL Server](https://learn.microsoft.com/ru-ru/sql/relational-databases/security/encryption/sql-server-encryption?view=sql-server-ver16)

[Создание диалога с дополнительным шифрованием](https://learn.microsoft.com/ru-ru/sql/t-sql/statements/begin-dialog-conversation-transact-sql?view=sql-server-ver16#f-beginning-a-dialog-with-optional-encryption)

[Шифрование столбца данных](https://learn.microsoft.com/ru-ru/sql/relational-databases/security/encryption/encrypt-a-column-of-data?view=sql-server-ver16)
