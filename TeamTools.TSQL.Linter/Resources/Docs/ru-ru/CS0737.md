

# Включение опции XACT_ABORT в теле триггера

|||
|-|-|
| Id | **CS0737**
| Мнемо | XACT_ABORT_IN_TRIGGER
| Серьёзность | ⚠ Предупреждение
| Категория | [СомнительноеКодирование](./Группа_Триггеры.md)
| Исходный код | [XactAbortInTriggerRule.cs](../../../Rules/CodeSmell/XactAbortInTriggerRule.cs)

## Причина

Правило срабатывает, если в теле триггера меняется настройка опции XACT_ABORT в ON.
<p id="descr">Удалите настройку опции XACT_ABORT.</p>

## Примеры

Некорректно

```sql
CREATE TRIGGER my_trigger
ON my_table
FOR ...
AS
BEGIN
SET XACT_ABORT ON;
...
END;
```

Корректно

```sql
CREATE TRIGGER my_trigger
ON my_table
FOR ...
AS
BEGIN
...
END;
```

## Подсказки

💡 Когда триггер активируется, СУБД автоматически устанавливает значение XACT_ABORT в ON. Нет необходимости пытаться изменить эту опцию в триггере.

## Ссылки

[Замечания SET XACT_ABORT](https://learn.microsoft.com/ru-ru/sql/t-sql/statements/set-xact-abort-transact-sql?view=sql-server-ver16#remarks)
