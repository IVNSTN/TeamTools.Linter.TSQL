

# Табличная переменная внутри функции

|||
|-|-|
| Id | **CS0832**
| Мнемо | MAKING_TABLES_IN_FUNC
| Серьёзность | ℹ Подсказка
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [DeclareTableInFunctionRule.cs](../../../Rules/CodeSmell/DeclareTableInFunctionRule.cs)

## Причина

Правило срабатывает, если внутри функции объявляется табличная переменная.
<p id="descr">Удалите табличную переменную.</p>

## Примеры

Некорректно

```sql
CREATE FUNCTION foo.bar (@id INT)
RETURNS @res TABLE
(
    tax         NUMERIC(14, 2) NOT NULL
    , currency  NUMERIC(14, 2) NOT NULL
)
AS
BEGIN
    DECLARE @calc TABLE
    (
        value INT
        , percent INT
    )
END
```

Корректно

```sql
CREATE FUNCTION foo.bar (@id INT)
RETURNS @res TABLE
(
    tax         NUMERIC(14, 2) NOT NULL
    , currency  NUMERIC(14, 2) NOT NULL
)
AS
BEGIN
    DECLARE @var INT
    RETURN
END
```
