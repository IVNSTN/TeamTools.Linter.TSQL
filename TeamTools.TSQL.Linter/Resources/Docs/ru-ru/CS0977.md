

# Удаление объекта без проверки на существование

|||
|-|-|
| Id | **CS0977**
| Мнемо | DROPPING_WITH_NO_CHECK
| Серьёзность | ℹ Подсказка
| Категория | [СомнительноеКодирование](./Категория_СомнительноеКодирование.md)
| Исходный код | [DropWithNoCheckRule.cs](../../../Rules/CodeSmell/DropWithNoCheckRule.cs)

## Причина

Правило срабатывает, если удаление происходит без проверки наличия объекта с использованием функции OBJECT_ID(...) или конструкции DROP ... IF EXISTS.
<p id="descr">Добавьте проверку наличия объекта.</p>

## Примеры

Некорректно

```sql
DROP TABLE tmp.my_table;
...
```

Корректно

```sql
DROP TABLE IF EXISTS tmp.my_table;
...
```

## Подсказки

💡 Microsoft SQL Server (при удалении можно использовать параметр IF EXISTS):

- `TABLE — таблица`
- `VIEW — представление`
- `PROCEDURE — хранимая процедура`
- `FUNCTION — функция`
- `SEQUENCE — последовательность`
- `TRIGGER — триггер`
- `INDEX — индекс`
- `DATABASE — база данных`
- `SCHEMA — схема`
- `ROLE — роль базы данных`
- `RULE — правила`
- `TYPE — псевдоним типа данных или определяемый пользователем тип данных`
- `AGGREGATE — определяемые пользователем агрегатные функции`
- `ASSEMBLY — сборка CLR`
- `USER — пользователь базы данных`
- `DEFAULT — объект «Значение по умолчанию»`
- `SECURITY POLICY — политика безопасности`
- `SYNONYM — синоним`

💡 Если объект не существует, SQL Server проигнорирует инструкцию и продолжит выполнение следующего оператора без ошибки.

## Ссылки

[Удаление таблицы с помощью IF EXISTS](https://learn.microsoft.com/ru-ru/sql/t-sql/statements/drop-table-transact-sql?view=sql-server-ver16#d-dropping-a-table-using-if-exists)
