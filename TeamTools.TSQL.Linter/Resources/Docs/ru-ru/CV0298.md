

# @@FETCH_STATUS в условии выхода из цикла

|||
|-|-|
| Id | **CV0298**
| Мнемо | CURSOR_INFINITE_LOOP
| Серьёзность | ⚠ Предупреждение
| Категория | [СоглашенияПоКодированию](./Категория_СоглашенияПоКодированию.md), [Курсоры](./Группа_Курсоры.md)
| Исходный код | [CursorInfiniteLoopRule.cs](../../../Rules/CodingConvention/CursorInfiniteLoopRule.cs)

## Причина

Правило срабатывает, если цикл использует в качестве условия выхода @@FETCH_STATUS.
<p id="descr">Вынесите проверку @@FETCH_STATUS внутрь бесконечного цикла.</p>

## Примеры

Некорректно

```sql
WHILE @@FETCH_STATUS = 0
BEGIN
    PRINT '1';
END
```

Корректно

```sql
WHILE 1 = 1
BEGIN
    IF @@FETCH_STATUS != 0
        BREAK;

    PRINT '1';
END;
```
