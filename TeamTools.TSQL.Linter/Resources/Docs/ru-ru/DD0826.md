
# В таблице слишком много столбцов

|||
|-|-|
| Id | **DD0826**
| Мнемо | TOO_MANY_COLUMNS
| Серьёзность | ℹ Подсказка
| Категория | [ДизайнБазДанных](./Категория_ДизайнБазДанных.md)
| Исходный код | [ForeignKeyRecursionRule.cs](../../../Rules/DatabaseDesign/TableHasTooManyColumnsRule.cs)

## Причина

Правило срабатывает, если обнаружено объявление таблицы, содержащей чрезмерно большое количество столбцов (>80).
<p id="descr">Разделите на несколько таблиц, проставьте признак SPARSE или определите COLUMNSTORE индекс.</p>

## Примеры

Некорректно

```sql
CREATE TABLE dbo.foo
(
    id   INT NOT NULL IDENTITY(1, 1) PRIMARY KEY
    , a1 INT NULL
    , b1 INT NULL
    , c1 INT NULL
    , d1 INT NULL
    , e1 INT NULL
    , f1 INT NULL
    ...
    ...
    ...
    , v4 INT NULL
    , w4 INT NULL
    , x4 INT NULL
    , y4 INT NULL
    , z4 INT NULL
    , dt DATE NULL
);
```

Корректно

```sql
CREATE TABLE dbo.foo
(
    id      INT          NOT NULL IDENTITY(1, 1) PRIMARY KEY
    , title VARCHAR(255) NOT NULL
    , dt    DATE         NULL
);
```

## Подсказки

💡 Если в таблице очень много столбцов, то она, во-первых, похожа на 'god-object', во-вторых, её сложно обслуживать. Иногда широкие таблицы делают специально, например, при денормализации с целью оптимизации, но удобнее пользоваться такой таблицей от этого не становится. Возможно, столбцам не хватает признака SPARSE или самой таблице не хватает COLUMNSTORE индекса. А возможно, это просто свалка беспорядочных данных, которую давно пора разбить на несколько каким-либо образом связанных таблиц.
