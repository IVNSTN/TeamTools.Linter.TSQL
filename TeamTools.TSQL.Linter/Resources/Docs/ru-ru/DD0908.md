

# Некластерный индекс включает столбцы кластерного индекса

|||
|-|-|
| Id | **DD0908**
| Мнемо | NONCLUSTERED_IDX_INCLUDES_CLUSTERED
| Серьёзность | ℹ Подсказка
| Категория | [ДизайнБазДанных](./Категория_ДизайнБазДанных.md), [Индексы](./Группа_Индексы.md)
| Исходный код | [NonClusteredIndexIncludingClusteredColsRule.cs](../../../Rules/DatabaseDesign/NonClusteredIndexIncludingClusteredColsRule.cs)

## Причина

Правило срабатывает, если некластерный индекс включает столбцы кластерного индекса.
<p id="descr">Удалите столбцы включённые в кластерный индекс.</p>

## Примеры

Некорректно

```sql
CREATE TABLE dbo.foo
(
    id          INT NOT NULL PRIMARY KEY
    , parent_id INT NULL
    , name      VARCHAR(10) NOT NULL
    , sect_num  TINYINT NOT NULL
) ON partition_fn(sect_num);
GO
CREATE NONCLUSTERED INDEX IX_parent_id ON dbo.foo(parent_id, id);
```

Корректно

```sql
CREATE TABLE dbo.foo
(
    id          INT NOT NULL PRIMARY KEY
    , parent_id INT NULL
    , name      VARCHAR(10) NOT NULL
    , sect_num  TINYINT NOT NULL
) ON partition_fn(sect_num);
GO
CREATE NONCLUSTERED INDEX IX_parent_id ON dbo.foo(parent_id);
```
