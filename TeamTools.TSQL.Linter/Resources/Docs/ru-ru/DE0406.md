

# Устаревший вид ограничения

|||
|-|-|
| Id | **DE0406**
| Мнемо | DEPRECATED_CONSTRAINT
| Серьёзность | ⚠ Предупреждение
| Категория | [Устаревание](./Категория_Устаревание.md)
| Исходный код | [DeprecatedConstraintObjectRule.cs](../../../Rules/Deprecation/DeprecatedConstraintObjectRule.cs)

## Причина

<p id="descr">Объекты RULE, DEFAULT устарели. Переделывайте в CHECK CONSTRAINT, DEFAULT CONSTRAINT.</p>

## Примеры

Некорректно

```sql
CREATE DEFAULT dbo.DBlankString AS '';

EXEC sys.sp_bindefault
    @defname = N'[dbo].[DBlankString]'
    , @objname = N'[dbo].[OrderTable].[Descr]';

CREATE RULE OrderIDRule AS @range>= 0 AND @range <100000

EXEC sys.sp_bindrule 
	@rulename = 'OrderIDRule'
	, @objname = 'dbo.OrderTable.ID';
```

Корректно

```sql
CREATE TABLE dbo.OrderTable
(
	ID       int NOT NULL CONSTRAINT CT_ID CHECK (ID >= 0 and ID < 100000)
    , Descr    VARCHAR(255) NOT NULL CONSTRAINT DF_OrderTable_Descr DEFAULT ''
);
```

## Ссылки

[CREATE TABLE (Transact-SQL)](https://learn.microsoft.com/ru-ru/sql/t-sql/statements/create-table-transact-sql)