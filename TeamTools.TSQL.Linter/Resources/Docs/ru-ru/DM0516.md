

# Очистка таблицы из кода

|||
|-|-|
| Id | **DM0516**
| Мнемо | TRUNCATING_TABLES
| Серьёзность | ⚠ Предупреждение
| Категория | [ОбслуживаниеБазДанных](./Категория_ОбслуживаниеБазДанных.md)
| Исходный код | [TableTruncateRule.cs](../../../Rules/DatabaseMaintenance/TableTruncateRule.cs)

## Причина

Правило срабатывает, если в коде обнаружена команда TRUNCATE TABLE для персистентной таблицы.
<p id="descr">Удалите TRUNCATE TABLE или используйте временную таблицу/переменную.</p>

## Примеры

Некорректно

```sql
TRUNCATE TABLE dbo.main_data
```

Корректно

```sql
TRUNCATE TABLE #main_data
```

## Подсказки

💡 Очистка временных таблиц (#) допустима.

💡 Для служебных и административных хранимых процедур выбирайте специально отведенные для этого схемы и базы данных.

💡 Иметь такой код опасно, потому что рядовой пользователь продукта, за счет получения доступа к некой интерфейсной хранимой процедуре, может прямо или косвенно получить доступ к управлению СУБД, что нежелательно. Такой доступ должен быть только у ДБА.
