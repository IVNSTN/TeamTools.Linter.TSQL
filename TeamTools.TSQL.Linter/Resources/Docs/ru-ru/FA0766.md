

# Функция не поддерживается в natively compiled модуле

|||
|-|-|
| Id | **FA0766**
| Мнемо | NATIVELY_FUNCTION_NOT_SUPPORTED
| Серьёзность | ⛔ Ошибка
| Категория | [Сбой](./Категория_Сбой.md), [ИнМемори](./Группа_ИнМемори.md)
| Исходный код | [NativelyUnsupportedFunctionCallRule.cs](../../../Rules/Failure/NativelyUnsupportedFunctionCallRule.cs)

## Причина

Правило срабатывает, если функция не поддерживается в natively compiled модуле.
<p id="descr">Удалите неподдерживаемую функцию.</p>

## Примеры

Некорректно

```sql
CREATE PROC dbo.foo
WITH NATIVE_COMPILATION, SCHEMABINDING, EXECUTE AS OWNER
AS
BEGIN ATOMIC WITH (TRANSACTION ISOLATION LEVEL = SNAPSHOT, LANGUAGE = N'English')
    IF XACT_STATE() <> 0
        SELECT CHECKSUM(
            TRY_CONVERT(NCHAR(10), 'asdf'))

    RETURN 1
END
GO
```

Корректно

```sql
CREATE PROC dbo.foo
WITH NATIVE_COMPILATION, SCHEMABINDING, EXECUTE AS OWNER
AS
BEGIN ATOMIC WITH (TRANSACTION ISOLATION LEVEL = SNAPSHOT, LANGUAGE = N'English')
    IF LEN('a') > 0
        SELECT TRY_CAST('asdf' AS NCHAR(10))

    RETURN 1
END
GO
```

## Ссылки

💡 [Встроенные функции в нативно-компилированных модулях](https://learn.microsoft.com/ru-ru/sql/relational-databases/in-memory-oltp/supported-features-for-natively-compiled-t-sql-modules?view=sql-server-ver16#bfncsp)
