
# SPARSE столбцы не могут быть частью первичного ключа или кластеризованного индекса

|||
|-|-|
| Id | **FA0769**
| Мнемо | SPARSE_CANNOT_BE_KEY
| Серьёзность | ⛔ Ошибка
| Категория | [Сбой](./Категория_Сбой.md), [Индексы](./Группа_Индексы.md)
| Исходный код | [SparseCannotBeKeyRule.cs](../../../Rules/Failure/SparseCannotBeKeyRule.cs)

## Причина

Правило срабатывает, если SPARSE столбцы являются частью первичного ключа или кластеризованного индекса.
<p id="descr">Удалите SPARSE столбцы из определения первичного ключа или кластеризованного индекса.</p>

## Примеры

Некорректно

```sql
CREATE TABLE dbo.bar
(
    col BIT SPARSE NULL
    , INDEX ix CLUSTERED (col)
)
```

Корректно

```sql
CREATE TABLE dbo.bar
(
    id INT NOT NULL
    , col BIT SPARSE NULL
    , INDEX ix CLUSTERED (id)
)
```

## Ссылки

💡 [Ограничения на использование SPARSE столбцов](https://learn.microsoft.com/ru-ru/sql/relational-databases/tables/use-sparse-columns?view=sql-server-ver16#restrictions-for-using-sparse-columns)
