
# Секционированный уникальный индекс должен содержать секционирующий столбец

|||
|-|-|
| Id | **FA0907**
| Мнемо | UNIQUE_INDEX_MISSING_PARTITIONED_COL
| Серьёзность | ⛔ Ошибка
| Категория | [Сбой](./Категория_Сбой.md), [Индексы](./Группа_Индексы.md)
| Исходный код | [UniqueIndexMissingPartitionedColRule.cs](../../../Rules/Failure/UniqueIndexMissingPartitionedColRule.cs)

## Причина

Правило срабатывает, если индекс секционирован и он уникальный, и ключ индекса не содержит ключ секционирования.
<p id="descr">Укажите ключ секционирования в индексе.</p>

## Примеры

Некорректно

```sql
CREATE TABLE dbo.PartitionTable (ins_date datetime2(0) , value_bar char(10)) ON myRangePS1 (ins_date);
CREATE UNIQUE INDEX ix_dbo_partitiontable_value_bar ON dbo.PartitionTable (value_bar) ON myRangePS1(ins_date);
```

Корректно

```sql
CREATE TABLE dbo.PartitionTable (ins_date datetime2(0) , value_bar char(10)) ON myRangePS1 (ins_date);
CREATE UNIQUE INDEX ix_dbo_partitiontable_value_bar ON dbo.PartitionTable (ins_date, value_bar) ON myRangePS1(ins_date);
```

## Ссылки

[Секционированные таблицы и индексы](https://learn.microsoft.com/ru-ru/sql/relational-databases/partitions/partitioned-tables-and-indexes?view=sql-server-ver16)
