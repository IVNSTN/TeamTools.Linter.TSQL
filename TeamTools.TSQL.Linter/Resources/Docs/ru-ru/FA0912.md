
# В определении окна отсутствует требуемое предложение ORDER BY

|||
|-|-|
| Id | **FA0912**
| Мнемо | WINDOW_MISSING_ORDERBY
| Серьёзность | ⛔ Ошибка
| Категория | [Сбой](./Категория_Сбой.md)
| Исходный код | [WindowFunctionRequiresOrderByRule.cs](../../../Rules/Failure/WindowFunctionRequiresOrderByRule.cs)

## Причина

Правило срабатывает, если в предложении OVER оконной функции не указана сортировка, обязательная для этой функции.
<p id="descr">Укажите сортировку для оконной функции.</p>

## Примеры

Некорректно

```sql
SELECT ROW_NUMBER() OVER(PARTITION BY ord.order_type) AS rn, ord.order_id
FROM dbo.orders AS ord;
```

Корректно

```sql
SELECT ROW_NUMBER() OVER(PARTITION BY ord.order_type ORDER BY ord.order_date) AS rn, ord.order_id
FROM dbo.orders AS ord;
```

## Подсказки
    
💡 Функция 'COUNT() OVER()' и другие агрегатные оконные функций могут не содержать инструкцию ORDER BY в предложении OVER.

💡 ORDER BY — определяет логический порядок строк в каждой секции результирующего набора.
    
## Ссылки

[SELECT - OVER предложение](https://learn.microsoft.com/ru-ru/sql/t-sql/queries/select-over-clause-transact-sql?view=sql-server-ver16)

[Ранжирующие функции](https://learn.microsoft.com/ru-ru/sql/t-sql/functions/ranking-functions-transact-sql?view=sql-server-ver16)

[Агрегатные функции](https://learn.microsoft.com/ru-ru/sql/t-sql/functions/aggregate-functions-transact-sql?view=sql-server-ver16)

[Функции аналитики](https://learn.microsoft.com/ru-ru/sql/t-sql/functions/analytic-functions-transact-sql?view=sql-server-ver16)