

# Операция не поддерживается этим типом

|||
|-|-|
| Id | **FA0957**
| Мнемо | NUMERIC_OPERATION_ON_NON_NUMERIC
| Серьёзность | ⛔ Ошибка
| Категория | [Сбой](./Категория_Сбой.md)
| Исходный код | [InvalidTypeForNumericOperationRule.cs](../../../Rules/Failure/InvalidTypeForNumericOperationRule.cs)

## Причина

Правило срабатывает, если арифметические операции выполнять с типами данных, которые их не поддерживает. Указанный в подробностях об ошибке тип данных не поддерживает обозначенную операцию.
<p id="descr">Укажите поддерживаемый арифметической операцией тип данных.</p>

## Примеры

Некорректно

```sql
DECLARE @dt_start  DATE = '2000-01-01'
DECLARE @dt_finish DATE = '2001-05-01'
SELECT  @dt_finish - @dt_start AS diff_days

DECLARE @dt_start  DATE = '2000-01-01 00:00:00.000'
DECLARE @dt_finish DATE = '2000-01-01 00:00:05.000'
SELECT  @dt_finish - @dt_start AS diff_sec
```

Корректно

```sql
DECLARE @dt_start  DATE = '2000-01-01'
DECLARE @dt_finish DATE = '2001-05-01'
SELECT  DATEDIFF(DAY, @dt_start, @dt_finish) AS diff_days

DECLARE @dt_start  DATETIME = '2000-01-01 00:00:00.000'
DECLARE @dt_finish DATETIME = '2000-01-01 00:00:05.000'
SELECT  @dt_finish - @dt_start  AS diff_sec
```

## Подсказки

💡 Суммировать или конкатенировать можно почти все типы, кроме (XML, HYERARCHYID, TIME), для них модификация значения не допускают (за исключением присвоения значения или редактирования специальной функцией).
    
## Ссылки

[Замена значений (XML DML)](https://learn.microsoft.com/ru-ru/sql/t-sql/xml/replace-value-of-xml-dml?view=sql-server-ver16)

[Создание и управление данными в иерархической таблице](https://learn.microsoft.com/ru-ru/sql/relational-databases/tables/lesson-2-creating-and-managing-data-in-a-hierarchical-table?view=sql-server-ver16)

[Типы даты и времени](https://learn.microsoft.com/ru-ru/sql/t-sql/data-types/date-and-time-types?view=sql-server-ver16)