

# Несколько колонок недопустимы в скалярном подзапросе

|||
|-|-|
| Id | **FA0989**
| Мнемо | SCALAR_QUERY_MULTIPLE_COL
| Серьёзность | ⛔ Ошибка
| Категория | [Сбой](./Категория_Сбой.md)
| Исходный код | [MultipleColumnsInScalarSubqueryRule.cs](../../../Rules/Failure/MultipleColumnsInScalarSubqueryRule.cs)

## Причина

Правило срабатывает, если скалярный подзапрос имеет несколько колонок для выборки.
<p id="descr">Укажите одну колонку в скалярном подзапросе.</p>

## Примеры

Некорректно

```sql
SELECT
    ord.client_id
    , (SELECT pr.type_id, pr.amount FROM dbo.product_types AS pr WHERE pr.order_id = ord.order_id) AS tpam
FROM dbo.orders AS ord;
```

Корректно

```sql
SELECT
    ord.client_id
    , (SELECT pr.amount FROM dbo.product_types AS pr WHERE pr.order_id = ord.order_id) AS am
FROM dbo.orders AS ord;
```

## Подсказки

💡 Скалярный подзапрос - вложенный запрос, возвращающий одно значение.

## Ссылки

[Вложенные запросы (SQL Server)](https://learn.microsoft.com/ru-ru/sql/relational-databases/performance/subqueries?view=sql-server-ver16#rules) 