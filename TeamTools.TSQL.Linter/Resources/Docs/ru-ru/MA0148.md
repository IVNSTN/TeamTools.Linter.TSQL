
# Неуникальный номер / статус генерируемого исключения

|||
|-|-|
| Id | **MA0148**
| Мнемо | UNIQUE_ERR_NO_OR_STATE
| Серьёзность | ⚠ Предупреждение
| Категория | [Обслуживаемость](./Категория_Обслуживаемость.md)
| Исходный код | [UniqueErrorNumberOrStateRule.cs](../../../Rules/Maintainability/UniqueErrorNumberOrStateRule.cs)

## Причина

Правило срабатывает, если обнаружена не уникальная комбинация номера и статуса генерируемого исключения.
<p id="descr">Укажите уникальную комбинацию номера ошибки и номера состояния исключения.</p>

## Примеры

Некорректно

```sql
DECLARE
    @errortext VARCHAR(100)
    , @state   INT;

RAISERROR(@errortext, 16, 0);
RAISERROR('err', 16, @state);
RAISERROR(50000, 16, 0);

THROW 50000, 'err', 1;
THROW 50000, 'err', 1;
```

Корректно

```sql
RAISERROR ('err', 16, 1);
RAISERROR ('err', 16, 2);

RAISERROR (50001, 16, 0);
RAISERROR (50002, 16, 0);

THROW 50003, 'err', 0;
THROW 50004, 'err', 0;

THROW 50000, 'err', 4;
THROW 50000, 'err', 5;
```

## Подсказки

💡 Отлаживать и мониторить модули, которые по любому поводу генерируют одинаковый код ошибки (соберем под "код" и номер, и статус), крайне неудобно. Уникальный же код ошибки позволяет гораздо быстрее локализовать источник проблемы. Будь то отладка онлайн или исследование лога зарегистрированных ошибок.
