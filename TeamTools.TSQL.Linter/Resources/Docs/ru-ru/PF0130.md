
# Индекс по столбцу ROWVERSION / TIMESTAMP не отмечен как уникальный

|||
|-|-|
| Id | **PF0130**
| Мнемо | ROWVERSION_UNIQUE
| Серьёзность | ⚠ Предупреждение
| Категория | [Производительность](./Категория_Производительность.md), [Индексы](./Группа_Индексы.md)
| Исходный код | [RowVersionIndexUniqueRule.cs](../../../Rules/Performance/RowVersionIndexUniqueRule.cs)

## Причина

Правило срабатывает, если индекс по столбцу с типом данных `ROWVERSION`/`TIMESTAMP` не отмечен как уникальный.
<p id="descr">Используйте уникальный индекс.</p>

## Примеры

Некорректно

```sql
CREATE TABLE dbo.acme (id INT NOT NULL, rn ROWVERSION NOT NULL);

CREATE INDEX ix_bar ON dbo.acme (rn, id);
```

Корректно

```sql
CREATE TABLE dbo.acme (id INT NOT NULL, rn ROWVERSION NOT NULL);

CREATE UNIQUE INDEX ix_foo ON dbo.acme (rn);
CREATE INDEX ix_bar ON dbo.acme (id);
CREATE UNIQUE INDEX ix_zar ON dbo.acme (rn, id);
```

## Подсказки

💡 `ROWVERSION`/`TIMESTAMP` уникален в пределах базы данных.
