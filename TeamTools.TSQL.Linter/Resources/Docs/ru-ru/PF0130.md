

# Индекс по полю ROWVERSION / TIMESTAMP не отмечен как уникальный

|||
|-|-|
| Id | **PF0130**
| Мнемо | ROWVERSION_UNIQUE
| Серьёзность | ⚠ Предупреждение
| Категория | [Производительность](./Категория_Производительность.md), [Индексы](./Группа_Индексы.md)
| Исходный код | [RowVersionIndexUniqueRule.cs](../../../Rules/Performance/RowVersionIndexUniqueRule.cs)

## Причина

<p id="descr">ROWVERSION / TIMESTAMP уникален в пределах БД. Используйте уникальный индекс по этому полю.</p>

## Примеры

Некорректно

```sql
CREATE TABLE dbo.acme (id INT NOT NULL, rn ROWVERSION NOT NULL);

CREATE INDEX ix_bar ON dbo.acme (rn, id);
```

Корректно

```sql
CREATE TABLE dbo.acme (id INT NOT NULL, rn ROWVERSION NOT NULL);

CREATE UNIQUE INDEX ix_foo ON dbo.acme (rn);
CREATE INDEX ix_bar ON dbo.acme (id);
CREATE UNIQUE INDEX ix_zar ON dbo.acme (rn, id);
```
