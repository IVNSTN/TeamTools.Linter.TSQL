

# UNION ALL предпочтительнее, так как один из литералов отличается в результирующем наборе

|||
|-|-|
| Id | **PF0238**
| Мнемо | UNION_TO_UNION_ALL
| Серьёзность | ⚠ Предупреждение
| Категория | [Производительность](./Категория_Производительность.md)
| Исходный код | [UnionToUnionAllRule.cs](../../../Rules/Performance/UnionToUnionAllRule.cs)

## Причина

<p id="descr">UNION без ALL означает сортировку. Если в резалтсетах используется различающийся литерал, то для того чтобы узнать что резалтсеты различаются сортировать не нужно.</p>

## Примеры

Некорректно

```sql
    SELECT
        EmployeeID,
        'Dept: 1st' AS Department
    FROM dbo.Employees1
    UNION
    SELECT
        EmployeeID,
        'Dept: 2nd' AS Department
    FROM dbo.Employees2;
```

Корректно

```sql
    SELECT
        EmployeeID,
        'Dept: 1st' AS Department
    FROM dbo.Employees1
    UNION ALL
    SELECT
        EmployeeID,
        'Dept: 2nd' AS Department
    FROM dbo.Employees2;
```

## Подсказки

💡  UNION удаляет дублирующиеся строки из выборки (подобно эффекту DISTINCT), поэтому будьте осторожны при замене на UNION ALL.
