
# Индекс имеет фильтр по NULL для столбца, который не включён в состав индекса

|||
|-|-|
| Id | **PF0928**
| Мнемо | FILTERED_IDX_FOR_NULL_COL_NOT_INCLUDED
| Серьёзность | ⚠ Предупреждение
| Категория | [Производительность](./Категория_Производительность.md), [Индексы](./Группа_Индексы.md)
| Исходный код | [IndexFilterColumnNullMissingInKeyRule.cs](../../../Rules/Performance/IndexFilterColumnNullMissingInKeyRule.cs)

## Причина

Правило срабатывает, если в определении индекса обнаружен фильтр `WHERE <col> IS NULL` по столбцу, который не включен в состав этого индекса.
<p id="descr">Удалите фильтр или включите столбец в состав индекса.</p>

## Примеры

Некорректно

```sql
CREATE INDEX IXF_dbo_foo_id ON dbo.foo(id)
WHERE title IS NULL;
```

Корректно

```sql
CREATE INDEX IXF_dbo_foo_id ON dbo.foo(id)
WHERE title IS NOT NULL;

CREATE INDEX IXIF_dbo_foo_id ON dbo.foo(id)
INCLUDE(title) WHERE title IS NULL;
```

## Подсказки

💡 Если в индексе есть фильтр `WHERE <col> IS NULL`, то такой индекс может быть применен к запросу с аналогичным фильтром, только если упомянутый столбец включен в перечень `INCLUDE` столбцов индекса. Если не включен, то индекс никогда не будет использован.
