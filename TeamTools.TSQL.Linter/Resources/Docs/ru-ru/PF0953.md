

# Ограничение TOP не накладывает ограничений

|||
|-|-|
| Id | **PF0953**
| Мнемо | TOP_TAKES_ALL
| Серьёзность | ⚠ Предупреждение
| Категория | [Производительность](./Категория_Производительность.md)
| Исходный код | [TopTakesAllRule.cs](../../../Rules/Performance/TopTakesAllRule.cs)

## Причина

<p id="descr">Если в ограничении TOP указано 100 PERCENT или большое число строк, то больше похоже что это ограничение ничего не ограничивает. Либо оно здесь лишнее, либо применяется сомнительное решение, опирающееся на порядок строк.</p>

## Примеры

Некорректно

```sql
SELECT TOP (100) PERCENT
    a, b, c
FROM dbo.bar
```

Корректно

```sql
SELECT a, b, c
FROM dbo.bar
```

## Подсказки

💡 Сортировать результирующий набор представлений не нужно. За этим дополнительно следит правило PF0952.

💡 Для конкатенации строк в определенном порядке лучше применить функцию STRING_AGG, в вызове которой возможно указать сортировку.

💡 Для нумерации строк в определенном порядке лучше применить функцию ROWNUMBER, в вызове которой возможно указать сортировку.

💡 Служебные и административные хранимые процедуры, отвечающие за перемещение данных по частям, следует размещать в отдельных схемах.
