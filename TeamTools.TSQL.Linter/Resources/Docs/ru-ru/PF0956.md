
# Рассмотрите преобразования фильтра в SARGable условие LIKE

|||
|-|-|
| Id | **PF0956**
| Мнемо | SUBSTRING_TO_LIKE
| Серьёзность | ⚠ Предупреждение
| Категория | [Производительность](./Категория_Производительность.md)
| Исходный код | [SubstringPredicateToLikeRule.cs](../../../Rules/Performance/SubstringPredicateToLikeRule.cs)

## Причина

Правило срабатывает, если в коде обнаружена фильтрация по началу строки через усечение значения столбца и сравнение со скалярным значением.
<p id="descr">Перепишите с использованием LIKE.</p>

## Примеры

Некорректно

```sql
SELECT env.var_name
FROM dbo.environment env
WHERE SUBSTRING(env.var_name, 1, 3) = 'GF_'
```

Корректно

```sql
SELECT env.var_name
FROM dbo.environment env
WHERE env.var_name LIKE 'GF[_]%'
```

## Подсказки

💡 Срабатывает на применение строковых функций `LEFT` и `SUBSTRING` (если извлечение идет с первого символа) в `WHERE`. Эти функции не саргабельны. А вот `LIKE` с известным началом строки, например `LIKE 'a%'` - саргабелен. И если есть индекс по фильтруемому столбцу, то будет `SEEK` вместо `SCAN`.

💡 Если в скалярном значении, с которым выполняется сравнение, есть символы, которые `LIKE` воспринимает как спецсимволы (`[`, `]`, `%`, `_`), то при переписывании с использованием `LIKE` их нужно экранировать.
