

# Рассмотрите преобразования фильтра в SARGable условие LIKE

|||
|-|-|
| Id | **PF0956**
| Мнемо | SUBSTRING_TO_LIKE
| Серьёзность | ⚠ Предупреждение
| Категория | [Производительность](./Категория_Производительность.md)
| Исходный код | [SubstringPredicateToLikeRule.cs](../../../Rules/Performance/SubstringPredicateToLikeRule.cs)

## Причина

<p id="descr">Фильтрация по началу строки может быть оптимальнее через LIKE, чем через усечение значения колонки и сравнение со скаляром.</p>

## Подсказки

💡 Реагирует на применение строковых функций LEFT и SUBSTRING (если извлечение идет с первого символа) в WHERE. Эти функции не саргабельны. А вот LIKE с известным началом строки, например LIKE 'a%' - вполне себе саргабелен. И если есть индекс по фильтруемому полю, то будет SEEK вместо SCAN.

💡 Если в скаляре, с которым сейчас выполняется сравнение, есть символы, которые LIKE воспринимает как спецсимволы ([, ], %, _), то их нужно будет при переделке на LIKE экранировать.

Было
```sql
SELECT env.var_name
FROM dbo.environment env
WHERE SUBSTRING(env.var_name, 1, 3) = 'GF_'
```
Стало
```sql
SELECT env.var_name
FROM dbo.environment env
WHERE env.var_name LIKE 'GF[_]%'
```
