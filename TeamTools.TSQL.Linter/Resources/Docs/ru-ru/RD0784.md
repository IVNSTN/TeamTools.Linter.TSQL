

# Бессмысленное выражение INTERSECT или EXCEPT

|||
|-|-|
| Id | **RD0784**
| Мнемо | REDUNDANT_INTERSECT_EXCEPT
| Серьёзность | ⚠ Предупреждение
| Категория | [Избыточность](./Категория_Избыточность.md)
| Исходный код | [RedundantIntersectExceptRule.cs](../../../Rules/Redundancy/RedundantIntersectExceptRule.cs)

## Причина

Правило срабатывает, если обнаружено использование литерала, различающегося в разных частях выражений INTERSECT или EXCEPT.
<p id="descr">Удалите литерал, различающийся в разных частях выражения.</p>

## Примеры

Некорректно

```sql
SELECT a, 1 FROM dbo.foo
INTERSECT
SELECT c, 0 FROM dbo.bar

SELECT a, 'a' FROM dbo.foo
EXCEPT
SELECT c, 'b' FROM dbo.bar
```

Корректно

```sql
SELECT a, b FROM dbo.foo
INTERSECT
SELECT c, 0 FROM dbo.bar

SELECT a, b FROM dbo.foo
EXCEPT
SELECT c, 'b' FROM dbo.bar
```

## Подсказки

💡 Для EXCEPT такая ситуация означает, что результатом всегда будет первый подзапрос, а для INTERSECT, что результат никогда не будет содержать строк. Если в разных частях выражения INTERSECT или EXCEPT есть различающийся литерал, то подзапросы заведомо не эквивалентны.
