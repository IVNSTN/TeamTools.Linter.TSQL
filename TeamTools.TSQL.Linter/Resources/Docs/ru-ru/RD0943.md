

# Избыточная агрегатная функция

|||
|-|-|
| Id | **RD0943**
| Мнемо | REDUNDANT_AGGREGATE
| Серьёзность | ⚠ Предупреждение
| Категория | [Избыточность](./Категория_Избыточность.md)
| Исходный код | [RedundantAggregationRule.cs](../../../Rules/Redundancy/RedundantAggregationRule.cs)

## Причина

Правило срабатывает, если обнаружено использование агрегатной функции на скалярной переменной или литерале.
<p id="descr">Удалите агрегат и используйте в выборке саму переменную/литерал.</p>

## Примеры

Некорректно

```sql
SELECT
    MAX(DISTINCT 1) AS m
    , SUM(0) AS s
    , AVG(100) AS a
    , COUNT(NULL) AS a
FROM dbo.foo AS t
```

Корректно

```sql
SELECT 1 AS rn, t.title AS main_title
FROM dbo.foo AS t

SELECT 1 AS rn, t.parent_id, MAX(t.date)
FROM dbo.foo AS t
GROUP BY t.parent_id
```
